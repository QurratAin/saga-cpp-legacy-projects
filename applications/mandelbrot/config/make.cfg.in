#  Copyright (c) 2005-2007 Andre Merzky (andre@merzky.net)
# 
#  Distributed under the Boost Software License, Version 1.0. 
#  (See accompanying file LICENSE.txt or copy at 
#   http://www.boost.org/LICENSE_1_0.txt)

# vim: ft=make

ifndef SAGA_MB_ROOT
	$(error need SAGA_MB_ROOT defined!)
endif

ifndef MAKE_CFG_IN
       MAKE_CFG_IN=yes

TMP_SAGA_LOCATION = @TMP_SAGA_LOCATION@
TMP_SAGA_INSTTYPE = @TMP_SAGA_INSTTYPE@
HAVE_PNG          = @HAVE_LIBPNG@
HAVE_X11          = @HAVE_LIBX11@
HAVE_FREETYPE     = @HAVE_LIBFREETYPE@

ifeq "$(TMP_SAGA_INSTTYPE)" "source"
  SAGA_ROOT              = $(TMP_SAGA_LOCATION)
  SAGA_MAKE_INCLUDE_ROOT = $(TMP_SAGA_LOCATION)/make
else
  SAGA_LOCATION          = $(TMP_SAGA_LOCATION)
  SAGA_MAKE_INCLUDE_ROOT = $(TMP_SAGA_LOCATION)/share/saga/make
endif


include $(SAGA_MAKE_INCLUDE_ROOT)/saga.util.mk


SAGA_CXXFLAGS   += -I$(SAGA_MB_ROOT)/external/pngwriter/
SAGA_LDFLAGS    +=  $(SAGA_MB_ROOT)/external/pngwriter/libpngwriter.a

ifeq "$(HAVE_PNG)" "yes"
 SAGA_CXXFLAGS  += -D_HAVE_PNG
 SAGA_LDFLAGS   +=  -lpng -lz
else
 SAGA_CXXFLAGS  += -D_HAVE_PNG
 SAGA_CXXFLAGS  += -I$(SAGA_MB_ROOT)/external/libpng/
 SAGA_LDFLAGS   +=  $(SAGA_MB_ROOT)/external/libpng/libpng.a -lz
endif




ifeq "$(HAVE_FREETYPE)" "yes"
 FLAGS          += -DHAVE_FREETYPE
else
 FLAGS          += -DHAVE_FREETYPE
 SAGA_CXXFLAGS  += -I$(SAGA_MB_ROOT)/external/libfreetype/include/
 SAGA_LDFLAGS   += $(SAGA_MB_ROOT)/external/libfreetype/libfreetype.a
endif

ifeq "$(HAVE_X11)" "yes"
 SAGA_CXXFLAGS  += -DHAVE_X11 -I/usr/X11/include
 SAGA_LDFLAGS   += -L/usr/X11/lib   -lX11
endif




endif # guard

