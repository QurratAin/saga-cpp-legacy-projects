Prerequisites:
- SAGA 1.0 or later with File and Job package
- Currently only tested with Globus adaptor (GRAM/GSIFTP)
- SAGA Python bindings (PYTHONPATH must be set accordingly)
- NAMD installation

There are currently three version of the REMD-Manager: 

REMD-simple.py:
- prepare_MAMD_config() : NPT.conf is changed if necessary (means after exchange step, new temperatures are assigned)
- get_energy() : energy is pulled from "output.txt" and this file name should be set when initialized
- do_exchange() : exchange is attempted here

0.) Setup SAGA
- install SAGA/Globus 

1.) Setup NAMD and RE:

- Configure NAMD installation. On QB the following softenv entries can be added to the .soft file:
+mvapich-1.0-intel10.1
+namd-2.6-mvapich
+nwchem-5.1-mpich

- create input file for NAMD. For the first run simply use the template from the svn:

cp NPT.conf.template NPT.conf

- Adjust configuration file (re_manager_simple.conf):
* adjust working directories (must exists on file system!)
* adjust allocation

[DEFAULT]
# RE Manager settings
arguments: NPT.conf
total_number_replica: 4
number_of_mpi_processes : 16
exchange_count  : 5
stage_in_file : 310K-init.coor  310K-init.xsc  NPT.conf  parm99bs0_all.prm  sbox_init.pdb  sbox_init.psf
temperature :  300 310 320 330 340 350 360 370 380 390 400 410 420 430 440 450

[QB]
# resource specific settings
rm_url: gram://qb1.loni.org/jobmanager-pbs
file_url: gsiftp://qb1.loni.org
number_nodes: 64
executable: /usr/local/packages/namd-2.6-mvapich-1.0-intel10.1/namd2
jobtype: mpi
working_dir_root: /work/luckow/replica/
allocation: loni_jha_big
queue: workq

The "executable" key must point to the "NAMD" application or dummy script, which outputs the energy level to a file ${working_dir_root}/<id>/output.txt (e.g. /work/luckow/replica/1/output.txt). The file will be parsed
for the following line:

ENERGY:       0       798.3326      1700.6136      2298.3014        54.7332        -224737.2778     24047.2578         0.0000         0.0000     35441.4919        -160396.5472       311.6531   -160302.3040   -160302.3040       311.6531           -207.0332      -206.6745    605251.7436      -207.0332      -206.6745

The real NAMD executable can be replaced with a dummy script, if required.

3.) The REMD Manager can be run as follows:

$ grid-proxy-init
$ python REMD-simple.py --configfile=re_manager_simple.conf
