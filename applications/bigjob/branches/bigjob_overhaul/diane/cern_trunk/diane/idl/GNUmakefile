IDL_MODULES =  Peer RunMaster Worker FileTransfer types
IDL_SRC_FILES = ${addsuffix .idl, ${IDL_MODULES}}
IDL_PY_GENERATED_FILES = ${addsuffix _idl.py, ${IDL_MODULES}} DIANE_CORBA DIANE_CORBA__POA

DEST_DIR = ${CURDIR}/../python

# all stubs generated by omniidl are copied to DIANE_CORBA_Modules

DIANE_CORBA_MODULE = DIANE_CORBA

.PHONY: all clean cleantmp

all: idl

idl: clean
	omniidl -bpython -nf ${IDL_SRC_FILES}; mv -f ${IDL_PY_GENERATED_FILES} ${DEST_DIR}
	@echo created CORBA stubs ${IDL_PY_GENERATED_FILES} in ${DEST_DIR}
clean:
	@rm -rf ${addprefix ${DEST_DIR}/,${IDL_PY_GENERATED_FILES}}
	@echo cleaned...

